<html>
    <head>
        <link rel="stylesheet" type="text/css" href="style.css">
    </head>
    <body>
        <table border="1">
            <tr>
                <td colspan="4">
                    <input type="text" id="inputBox" value="0"/>
                </td>
            </tr>
            <tr>
                <td class="digitButton" onclick="digitBtnPressed('7')">7</td>
                <td class="digitButton" onclick="digitBtnPressed('8')">8</td>
                <td class="digitButton" onclick="digitBtnPressed('9')">9</td>
                <td class="operatorButton" onclick="digitBtnPressed('x')">x</td>
            </tr>
            <tr>
                <td class="digitButton" onclick="digitBtnPressed('4')">4</td>
                <td class="digitButton" onclick="digitBtnPressed('5')">5</td>
                <td class="digitButton" onclick="digitBtnPressed('6')">6</td>
                <td class="operatorButton" onclick="digitBtnPressed('-')">-</td>
            </tr>
            <tr>
                <td class="digitButton" onclick="digitBtnPressed('1')">1</td>
                <td class="digitButton" onclick="digitBtnPressed('2')">2</td>
                <td class="digitButton" onclick="digitBtnPressed('3')">3</td>
                <td class="operatorButton" onclick="digitBtnPressed('+')">+</td>
            </tr>
            <tr>
                <td colspan="2" class="digitButton" onclick="digitBtnPressed('0')">0</td>
                <td class="operatorButton" onclick="btnACPressed()">AC</td>
                <td class="operatorButton" onclick="digitBtnPressed('/')">/</td>
            </tr>
            <tr>
                <td colspan="4" onclick="digitBtnPressed('=')">=</td>
            </tr>
        </table>
        <script>
            // Store the current input and last operator
            let currentInput = "";
            let lastOperator = "";
            let resultDisplayed = false;

            // Handles digit and operator button presses
            function digitBtnPressed(button) {
                let inputBox = document.getElementById("inputBox");
                let currentValue = inputBox.value;

                // If result is displayed and a digit is pressed, start new input
                if (resultDisplayed && !isNaN(button)) {
                    currentValue = "";
                    resultDisplayed = false;
                }

                // If '=' is pressed, evaluate the expression
                if (button === "=") {
                    // Replace 'x' with '*' for multiplication
                    let expression = currentValue.replace(/x/g, "*");
                    try {
                        // Evaluate the expression and display result
                        let result = eval(expression);
                        inputBox.value = result;
                        resultDisplayed = true;
                    } catch (e) {
                        inputBox.value = "Error";
                        resultDisplayed = true;
                    }
                } else {
                    // Prevent multiple operators in a row
                    if (["+", "-", "x", "/"].includes(button) && ["+", "-", "x", "/"].includes(currentValue.slice(-1))) {
                        inputBox.value = currentValue.slice(0, -1) + button;
                    } else {
                        // If current value is '0', replace it
                        inputBox.value = currentValue === "0" ? button : currentValue + button;
                    }
                }
            }

            // Handles the AC (All Clear) button
            function btnACPressed() {
                document.getElementById("inputBox").value = "0";
                resultDisplayed = false;
            }
        </script>
    </body>
</html>